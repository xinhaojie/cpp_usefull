/****************************************************************************************************
* @_______________#########_______________________ 
* @______________############_____________________ 
* @______________#############____________________ 
* @_____________##__###########___________________ 
* @____________###__######_#####__________________ 
* @____________###_#######___####_________________ 
* @___________###__##########_####________________ 
* @__________####__###########_####_______________ 
* @________#####___###########__#####_____________ 
* @_______######___###_########___#####___________ 
* @_______#####___###___########___######_________ 
* @______######___###__###########___######_______ 
* @_____######___####_##############__######______ 
* @____#######__#####################_#######_____ 
* @____#######__##############################____ 
* @___#######__######_#################_#######___ 
* @___#######__######_######_#########___######___ 
* @___#######____##__######___######_____######___ 
* @___#######________######____#####_____#####____ 
* @____######________#####_____#####_____####_____ 
* @_____#####________####______#####_____###______ 
* @______#####______;###________###______#________ 
* @________##_______####________####______________ 
* @
* @Author       : xinhaojie xinhaojie@qq.com
* @Date         : 2025-03-08 11:52:11
* @LastEditors  : xinhaojie xinhaojie@qq.com
* @LastEditTime : 2025-03-08 11:55:55
* @FilePath     : /cpp_usefull/include/log.hxx
* @Description  : 日志打印
* @Copyright (c) 2025 by xinhaojie@qq.com, All Rights Reserved.
****************************************************************************************************/
#pragma once

/***************************************************************************************************
* 其他头文件包含
***************************************************************************************************/
#include <syslog.h>

/***************************************************************************************************
* 宏定义
***************************************************************************************************/
//#define DEBUG  1

// 打开系统日志
//openlog("my_program", LOG_PID | LOG_CONS, LOG_USER);

#define END = '\033[0m'
#define BLACK = '\033[30m'
#define RED = '\033[31m'
#define GREEN = '\033[32m'
#define YELLOW = '\033[33m'
#define BLUE = '\033[34m'
#define PURPLE = '\033[35m'
#define CYAN = '\033[36m'
#define WHITE = '\033[37m'

// 提取文件名的函数
inline const char *__get_filename(void) {
    const char *filename = strrchr(__FILE__, '/');
    return filename + 1;
}

// 获取当前时间的毫秒数
inline unsigned long long __get_current_time_ms(void) {
    struct timeval tv;
    gettimeofday(&tv, NULL);
    return (unsigned long long)tv.tv_sec * 1000 + tv.tv_usec / 1000;
}

#define infor(fmt, args...)  \
    do{\
        syslog(LOG_INFO, fmt, ##args)   \
        printf("[\033[34mINFO\033[0m: %s:%d:%llu]" fmt "\n", __get_filename(), __LINE__, __get_current_time_ms(), ##args);\
    }while(0)
#define error(fmt, args...)  \
    do{\
        syslog(LOG_ERR, fmt, ##args)   \
        printf("[\033[31mERROR\033[0m: %s:%d:%llu]" fmt "\n", __get_filename(), __LINE__, __get_current_time_ms(), ##args);\
    }while(0)

#ifdef	DEBUG
#define	debug(fmt,args...)      \
    do{\
        syslog(LOG_DEBUG, fmt, ##args)   \
        printf("[\033[32mDEBUG\033[0m: %s:%d:%llu]" fmt "\n", __get_filename(), __LINE__, __get_current_time_ms(), ##args);\
    }while(0)
#else
#define	debug(fmt,args...)  do {} while (0)
#endif
/***************************************************************************************************
* 枚举定义
***************************************************************************************************/

/***************************************************************************************************
* 全局变量声明
***************************************************************************************************/

/***************************************************************************************************
* 消息头定义
***************************************************************************************************/

/***************************************************************************************************
* 消息定义
***************************************************************************************************/

/***************************************************************************************************
* 结构体定义
***************************************************************************************************/

/***************************************************************************************************
* 联合体定义
***************************************************************************************************/

/***************************************************************************************************
* 其他定义
***************************************************************************************************/

/***************************************************************************************************
* 函数声明
***************************************************************************************************/
